(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["_tickets"],{"262d":function(t,e,s){t.exports=s.p+"img/Questions.3022ba39.svg"},"3e07":function(t,e,s){"use strict";var a=s("bf6e"),i={name:"mdi-chevron-up",props:{width:{type:[Number,String],default:null},height:{type:[Number,String],default:null},size:{type:[Number,String],default:24},viewBox:{type:[String],default:"0 0 24 24"},xmlns:{type:String,default:"http://www.w3.org/2000/svg"},ariaLabel:{type:String,default:"ChevronUp icon"},role:{type:String,default:"img"},title:{type:String,required:!1},spin:{type:Boolean,default:!1}}};const n=i;var r=function(t,e){var s=e._c;return s("span",{class:[e.data.staticClass,"mdi","mdi-chevron-up",e.props.spin?"mdi-spin":void 0],attrs:{role:e.props.role,"aria-label":e.props.ariaLabel}},[s("svg",{attrs:{fill:"currentColor",width:e.props.width||e.props.size,height:e.props.height||e.props.size,viewBox:e.props.viewBox,xmlns:e.props.xmlns}},[e.title?s("title",[e._v(e._s(e.title))]):e._e(),e._v(" "),s("path",{attrs:{d:"M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z"}})])])},c=[];r._withStripped=!0;const o=function(t){t&&t("data-v-6831b4a6_0",{source:".mdi > svg {\n  vertical-align: middle;\n}\n.mdi.mdi-spin > svg {\n  -webkit-animation: mdi-spin 2s infinite linear;\n     -moz-animation: mdi-spin 2s infinite linear;\n          animation: mdi-spin 2s infinite linear;\n}\n@-webkit-keyframes mdi-spin {\n0% {\n      -webkit-transform: rotate(0deg);\n         -moz-transform: rotate(0deg);\n              transform: rotate(0deg);\n}\n100% {\n      -webkit-transform: rotate(360deg);\n         -moz-transform: rotate(360deg);\n              transform: rotate(360deg);\n}\n}\n@keyframes mdi-spin {\n0% {\n      -webkit-transform: rotate(0deg);\n         -moz-transform: rotate(0deg);\n              transform: rotate(0deg);\n}\n100% {\n      -webkit-transform: rotate(360deg);\n         -moz-transform: rotate(360deg);\n              transform: rotate(360deg);\n}\n}",map:void 0,media:void 0})},d=void 0,_=void 0,u=!0,l=Object(a["b"])({render:r,staticRenderFns:c},o,n,d,u,_,!1,a["a"],void 0,void 0);e["a"]=l},"40ce":function(t,e,s){t.exports=s.p+"img/clock.a24e7f02.svg"},a1f0:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tickets"},[t.dataLoading?a("loading-overlay"):t._e(),t.tickets.total||t.dataLoading?t._e():a("div",{staticClass:"no-results"},[a("img",{attrs:{src:s("262d"),alt:"Questions"}}),a("h1",{staticClass:"no-results__title no-results__title_question"},[t._v(" No issues ")]),a("p",{staticClass:"no-results__description"},[t._v(" Create a new support ticket, if you need help. ")])]),t._l(t.tickets.data,(function(e,i){return a("div",{key:i,staticClass:"tickets_card"},[a("div",{staticClass:"tickets_card__info"},[e.orderid?a("router-link",{staticClass:"tickets_card__title",attrs:{to:{name:"details",params:{id:e.orderid},query:{tab:"tickets",referenceid:e.ticketid}}}},[a("h2",[a("span",{staticClass:"tickets_card__title-index"},[t._v(" "+t._s(t.offset+i+1+". ")+" ")]),t._v(" «"),a("span",{staticClass:"tickets-title-text"},[t._v(t._s(e.subject||"Untitled"))]),t._v("» "),a("span",{staticClass:"break-xs"},[a("span",{staticClass:"tickets_card__title--status",class:{"tickets_card__title--status__success":"OPEN"===e.status_support,"tickets_card__title--status__error":"OPEN"!==e.status_support}},[t._v(" "+t._s(e.status_support)+" ")])])])]):a("h2",{staticClass:"tickets_card__title"},[a("span",{staticClass:"tickets_card__title-index"},[t._v(" "+t._s(t.offset+i+1)+". ")]),t._v(" «"+t._s(e.subject||"Untitled")+"» "),a("span",{staticClass:"tickets_card__title--status",class:{"tickets_card__title--status__success":"OPEN"===e.status_support,"tickets_card__title--status__error":"OPEN"!==e.status_support}},[t._v(" "+t._s(e.status_support)+" ")])]),a("div",{staticClass:"tickets_card__metainfo",class:{"show-info":e.showMessages}},[a("span",{staticClass:"tickets_card__metainfo-data"},[a("span",{staticClass:"tickets_card__metainfo-data-title"},[t._v(" "+t._s(t._f("moment_bidding_text")(e.created_at.date))+" ")]),a("span",{staticClass:"tickets_card__metainfo-data-counter"},[a("img",{staticClass:"mdi",attrs:{src:s("40ce"),alt:"Deadline",width:"20px",height:"20px"}}),t._v(" "+t._s(t._f("moment_from")(e.created_at.date))+" ago ")])]),e.ticketid?a("span",{staticClass:"tickets_card__metainfo-data"},[a("span",{staticClass:"tickets_card__metainfo-data-title"},[t._v(" Ticket ID ")]),a("span",{staticClass:"tickets_card__metainfo-data-counter"},[a("img",{staticClass:"mdi",attrs:{src:s("fe3c"),alt:"Deadline",width:"20px",height:"20px"}}),t._v(" "+t._s(e.ticketid)+" ")])]):t._e(),e.orderid?a("span",{staticClass:"tickets_card__metainfo-data"},[a("span",{staticClass:"tickets_card__metainfo-data-title"},[t._v(" Order ID ")]),a("span",{staticClass:"tickets_card__metainfo-data-counter"},[a("img",{staticClass:"mdi",attrs:{src:s("fe3c"),alt:"Deadline",width:"20px",height:"20px"}}),t._v(" "+t._s(e.orderid)+" ")])]):t._e(),e.messages.length>0?a("span",{staticClass:"tickets_card__metainfo-data tickets_card__metainfo-data--md0"},[a("span",{staticClass:"tickets_card__metainfo-data-title"},[t._v(" Comments ")]),a("span",{staticClass:"tickets_card__metainfo-data-counter"},[a("img",{staticClass:"mdi",attrs:{src:s("d3c9"),alt:"Deadline",width:"20px",height:"20px"}}),t._v(" "+t._s(e.messages.length)+" "),e.unread_messages.length>0?a("span",{staticClass:"orange-text"},[t._v(" +"+t._s(e.unread_messages.length)+" "),a("sup",[t._v("new")])]):t._e()]),a("span",{staticClass:"show-info__detail"})]):t._e(),a("a",{staticClass:"tickets_card__toggle-btn",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.toggle(i,e.ticketid)}}},[e.showMessages?a("chevron-up"):a("chevron-down")],1)]),a("transition",{attrs:{name:"slide-y-transition"}},[e.showMessages?a("div",{staticClass:"tickets_card__messages"},[t._l(e.messages,(function(e,s){return a("div",{key:s,staticClass:"tickets_card__messages-item",class:{"tickets_card__messages-item__support":"client"!==e.owner}},[a("div",{staticClass:"tickets_card__messages-item__inside"},[a("div",{staticClass:"tickets_card__messages-item__content"},[a("div",{staticClass:"tickets_card__messages-item__content-header"},[e.created_at_local?a("span",{staticClass:"tickets_card__messages-item__content-header__time"},[t._v(" "+t._s(t._f("moment_from")(e.created_at_local.date))+" ago "),a("br"),a("small",[t._v(" "+t._s(t._f("moment_short_text")(e.created_at_local.date))+" ")])]):t._e(),"client"===e.owner?a("span",{staticClass:"tickets_card__messages-item__content-header__name"},[t._v(" "+t._s(""+t.firstname)+" ")]):a("span",{staticClass:"tickets_card__messages-item__content-header__name"},[t._v(" Support ")])]),a("div",{staticClass:"tickets_card__messages-item__content-text",domProps:{innerHTML:t._s(e.details)}})]),a("div",{staticClass:"tickets_card__messages-item__avatar"},["client"===e.owner?a("div",{staticClass:"tickets_card__messages-item__avatar-user"},[a("span",[t._v(t._s(""+(t.firstname.substr(0,1)+t.lastname.substr(0,1))))])]):a("div",{staticClass:"tickets_card__messages-item__avatar-service"})])])])})),a("div",{staticClass:"tickets_card__messages-actions"},[a("form-input",{attrs:{legend:"Message",type:"text",name:"message",field:t.message,errors:t.validationMessage(t.$v.message)},on:{"update:field":function(e){t.message=e}},nativeOn:{input:function(e){return t.$v.message.$touch()},blur:function(e){return t.$v.message.$touch()},keyup:function(e){return t.keyListner(e)}},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),a("button",{staticClass:"btn-base btn-base_normal btn-base_colored tickets_card__messages-actions-btn",on:{click:function(s){return s.preventDefault(),t.sendMessage(e.ticketid)}}},[t.loadingBtn?a("button-loader"):t._e(),t._v(" Reply ")],1)],1)],2):t._e()]),a("a",{staticClass:"tickets_card__toggle-btn_mobile",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.toggle(i,e.ticketid)}}},[e.showMessages?a("span",{staticClass:"btn-base btn-base_normal btn-base_border btn-base_border-ticket"},[t._v("hide")]):a("span",{staticClass:"btn-base btn-base_normal btn-base_border btn-base_border-ticket"},[t._v("Show more")])])],1)])}))],2)},i=[],n=(s("d3b7"),s("96cf"),s("1da1")),r=s("5530"),c=s("8cd1"),o=s("2ef0"),d=s("41bd"),_=s("5ff3"),u=s("1dce"),l=s("376d"),p=s("b5ae"),m=s("c098"),g=s("3e07"),f=s("3fcd"),k=s("533f"),v=s("3bf6"),h=s("eca1"),b=s("8a67"),w=s("2f62"),C=s("0d8a"),x=s("c581"),y=Object(w["a"])("support"),O=y.mapMutations,M=y.mapActions,$={components:{ChevronUp:g["a"],ChevronDown:f["a"],LoadingOverlay:k["a"],ButtonLoader:v["a"]},mixins:[_["a"],u["validationMixin"]],props:{orderid:{type:String}},validations:{message:{required:p["required"]}},data:function(){return{page:this.$router.currentRoute.params.page||1,dataLoading:!1,tickets:[],loadingBtn:!1}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(x["b"])(["client_data.id"])),Object(C["a"])(["form_data.message"])),{},{offset:function(){return this.tickets.per_page*(this.page-1)},firstname:function(){return this.$store.state.client.client_data.firstname},lastname:function(){return this.$store.state.client.client_data.lastname}}),mounted:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getData();case 2:t.$route.query.referenceid&&(s=t.$route.query.referenceid,a=Object(o["findIndex"])(t.tickets.data,(function(t){return t.ticketid===s})),t.toggle(a,s)),d["a"].$on("showSnackBar",(function(e){"A support ticket has been created. You can view all tickets in your account (Support Tickets)."===e&&t.getData()}));case 4:case"end":return e.stop()}}),e)})))()},methods:Object(r["a"])(Object(r["a"])(Object(r["a"])({},M({actionTicketAskReply:h["a"],actionTicketSubmitReply:h["c"]})),O({clearMessage:b["b"]})),{},{toggle:function(t,e){this.$v.$reset();var s=this,a=this.tickets.data[t].showMessages;this.clearMessage(),Object(o["forEach"])(s.tickets.data,(function(t){t.showMessages=!1})),this.tickets.data[t].showMessages=!a,s.$forceUpdate(),setTimeout((function(){s.markAsRead(t,e)}),1e3)},markAsRead:function(t,e){var s=this;return new Promise((function(a,i){var n=s;c["a"].post("/api/cp/ticket-support/mark-ticket-messages-as-read",{ticketid:e}).then((function(){n.tickets.data[t].unread_messages=[],n.$root.$emit("updateCounter"),a(!0)})).catch((function(t){i(t)}))}))},keyListner:function(t){13===t.which&&this.message.length&&this.sendMessage()},sendMessage:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var a,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(e.$v.$touch(),0!==e.message.length){s.next=3;break}return s.abrupt("return");case 3:return a=e,a.actionTicketAskReply({id:t}),a.loadingBtn=!0,s.next=8,a.actionTicketSubmitReply({id:t});case 8:i=s.sent,i&&a.updateMessage(t).then((function(){d["a"].$emit("showSnackBar","Your message has been received","success"),a.message=""})).catch((function(t){d["a"].$emit("showSnackBar",t.message,"error")})).then((function(){a.$v.$reset(),a.loadingBtn=!1}));case 10:case"end":return s.stop()}}),s)})))()},validationMessage:Object(l["validationMessage"])(m["a"]),getData:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t.orderid),t.dataLoading=!0,s=t,e.next=5,c["a"].post("/api/cp/ticket-support/list-tickets",{orderid:s.orderid,per_page:10,clientid:s.id}).then((function(t){s.tickets=t.data})).then((function(){s.dataLoading=!1}));case 5:case"end":return e.stop()}}),e)})))()},updateMessage:function(t){var e=this;return new Promise((function(s,a){var i=e;c["a"].post("/api/cp/ticket-support/fetch",{ticketid:t}).then((function(e){var a=Object(o["findIndex"])(i.tickets.data,(function(e){return e.ticketid===t}));i.tickets.data[a].messages=e.data[0].messages,s(!0)})).catch((function(t){a(t)}))}))}})},L=$,j=s("2877"),S=Object(j["a"])(L,a,i,!1,null,null,null);e["a"]=S.exports},c098:function(t,e,s){"use strict";s.d(e,"a",(function(){return a}));var a={required:function(){return"Required"},email:function(){return"Must be a valid e-mail"},emailExists:function(){return"E-mail already exists"},minLength:function(t){var e=t.$params;return"Must be at least ".concat(e.minLength.min," characters.")},maxLength:function(t){var e=t.$params;return"Must be less than ".concat(e.maxLength.max," characters.")}}},d3c9:function(t,e,s){t.exports=s.p+"img/message-square.2f762c72.svg"},e814:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main-layout",{attrs:{"settings-breadcrumbs":t.settingsBreadcrumbs},scopedSlots:t._u([{key:"content",fn:function(){return[s("div",{staticClass:"wrapper tickets-top"},[s("router-link",{staticClass:"btn-base btn-base_normal btn-base_colored",attrs:{to:{name:"support_form"}}},[t._v(" New support ticket ")])],1),s("div",{staticClass:"wrapper wrapper--xs"},[s("support-ticket")],1)]},proxy:!0}])})},i=[],n=s("713b"),r=s("a1f0"),c={components:{MainLayout:n["a"],SupportTicket:r["a"]},computed:{settingsBreadcrumbs:function(){return{title:"Help Center",steps:[{title:"Home",url:"/"},{title:"Account",url:"/cp/account"},{title:"Credits",url:"/cp/tickets/1"}],excerpt:"If you have an issue with your order, you can create a support ticket and get the problem resolved. Our support agents respond very quickly and work 24/7.",additionalClass:"bc-horizontal bc-tickets"}}}},o=c,d=s("2877"),_=Object(d["a"])(o,a,i,!1,null,null,null);e["default"]=_.exports},fe3c:function(t,e,s){t.exports=s.p+"img/clipboard.fc5d3287.svg"}}]);
//# sourceMappingURL=_tickets.645e5683.js.map