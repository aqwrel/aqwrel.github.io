(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["_myorderdetails"],{"02cf":function(t,e,a){t.exports=a.p+"img/support.fa061e8f.svg"},"0cb6":function(t,e,a){},"0cc2":function(t,e,a){t.exports=a.p+"img/mail.0e5ed33b.svg"},"0d20":function(t,e,a){t.exports=a.p+"img/paperclip.4f7de3a8.svg"},"1fe6":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main-layout",{attrs:{"settings-breadcrumbs":t.settingsBreadcrumbs},scopedSlots:t._u([{key:"content",fn:function(){return[s("section",{staticClass:"wrapper wrapper--xs"},[s("div",{staticClass:"my-orders-details"},[t.dataLoading&&!t.noResults?s("loading-overlay"):t._e(),t.dataLoading||t.noResults?t._e():s("div",[s("orders-card",{attrs:{order:t.order,index:1,offset:1,page:1,mode:"details"},on:{updateData:t.onActionCompleted,onDeleted:function(e){return t.onDeleted()},eventChangeTab:t.onChangeTab}}),s("div",{staticClass:"orders-details-tabs"},[s("div",[s("div",{staticClass:"orders-details-tabs__tab-links"},[s("a",{staticClass:"button transparent-btn",class:{"active-tab-link":t.tabs["#details"]},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.show("#details")}}},[s("img",{staticClass:"mdi",attrs:{src:a("998d"),alt:"Deadline",width:"20px",height:"20px"}}),s("span",[t._v("Details")])]),s("a",{staticClass:"button transparent-btn",class:{"active-tab-link":t.tabs["#files"]},attrs:{href:"#","data-tab":"add-files"},on:{click:function(e){return e.preventDefault(),t.show("#files")}}},[s("img",{staticClass:"mdi",attrs:{src:a("0d20"),alt:"Deadline",width:"20px",height:"20px"}}),s("span",[t._v("Files")])]),s("a",{staticClass:"button transparent-btn",class:{"active-tab-link":t.tabs["#messages"]},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.show("#messages")}}},[s("img",{staticClass:"mdi",attrs:{src:a("0cc2"),alt:"Deadline",width:"20px",height:"20px"}}),s("span",[t._v("Messages")]),t.order.unread_messages&&t.order.unread_messages.length>0?s("v-chip",[t._v(" "+t._s(t.order.unread_messages.length)+" ")]):t._e()],1),s("a",{staticClass:"button transparent-btn",class:{"active-tab-link":t.tabs["#tickets"]},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.show("#tickets")}}},[s("img",{staticClass:"mdi",attrs:{src:a("02cf"),alt:"Deadline",width:"20px",height:"20px"}}),s("span",[t._v("Help Center")]),t.ticketsNotification>0?s("span",{staticClass:"file__new"},[t._v(" "+t._s(t.ticketsNotification)+" ")]):t._e()])])]),s("div",[t.tabs["#details"]?s("div",{staticClass:"tab-content"},[s("order-details",{attrs:{order:t.order}})],1):t._e(),t.tabs["#files"]?s("div",{staticClass:"tab-content",attrs:{id:"files"}},[s("attachments")],1):t._e(),t.tabs["#messages"]?s("div",{staticClass:"orders-details-tabs__messages tab-content",attrs:{id:"messages"}},[s("messages")],1):t._e(),t.tabs["#tickets"]?s("div",{staticClass:"orders-details-tabs__support-container help-center tab-content"},[s("header",{staticClass:"orders-details-tabs__tab-header"},[s("p",{staticClass:"orders-details-tabs__tab-description"},[s("img",{staticClass:"mdi",attrs:{src:a("9d9f"),alt:"Deadline",width:"20px",height:"20px"}}),t._v(" Here is the list of all support tickets open with regards to this project. You can create a new support ticket directly from this page. ")])]),s("div",{staticClass:"orders-details-tabs__support-tickets"},[s("button",{staticClass:"btn-base btn-base_colored btn-base_normal",on:{click:function(e){return t.scrollToSupportForm()}}},[t._v(" New Ticket ")]),s("Tickets",{attrs:{orderid:t.order.orderid}})],1),s("header",{staticClass:"orders-details-tabs__tab-header orders-details-tabs__tab-header__new",attrs:{id:"create-ticket"}},[s("h2",{staticClass:"orders-details-tabs__tab-title"},[t._v(" New Ticket ")])]),s("support-form",{attrs:{"prop-order-id":t.order.orderid}})],1):t._e()])])],1),!t.dataLoading&&t.noResults?s("no-results",{staticClass:"pt-5",attrs:{type:"order-details"}}):t._e()],1)])]},proxy:!0}])})},i=[],r=(a("4160"),a("d3b7"),a("159b"),a("96cf"),a("1da1")),n=a("5530"),o=a("41bd"),c=a("8cd1"),l=a("2e22"),d=a("5ff3"),_=a("c581"),u=a("2ef0"),p=a("713b"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message-details"},[a("header",{staticClass:"orders-details-tabs__tab-header"},[a("p",{staticClass:"orders-details-tabs__tab-description"},[a("InformationOutline"),t._v(" This is the communication log of the project. All your as well as the writers' messages are shown here. ")],1)]),a("section",{staticClass:"tickets page-content wrapper"},[a("div",{staticClass:"page-content__col12"},[a("div",[a("div",{staticClass:"tickets"},[a("div",{staticClass:"tickets_card"},[a("div",{staticClass:"tickets_card__info"},[a("transition",{attrs:{name:"slide-y-transition"}},[a("div",{staticClass:"tickets_card__messages"},[a("div",t._l(t.messages,(function(e,s){return a("div",{key:s,staticClass:"tickets_card__messages-item",class:{"tickets_card__messages-item__support":"client"!==e.owner}},[a("div",{staticClass:"tickets_card__messages-item__inside"},[a("div",{staticClass:"tickets_card__messages-item__content"},[a("div",{staticClass:"tickets_card__messages-item__content-header"},[e.created_at_local?a("span",{staticClass:"tickets_card__messages-item__content-header__time"},[a("span",[t._v(t._s(t._f("moment_from")(e.created_at_local.date))+" ago")]),a("small",[t._v(" "+t._s(t._f("moment_short_text")(e.created_at_local.date))+" ")])]):t._e(),"client"===e.owner?a("span",{staticClass:"tickets_card__messages-item__content-header__name"},[t._v(" "+t._s(""+t.firstname)+" ")]):a("span",{staticClass:"tickets_card__messages-item__content-header__name"},[t._v(" Support ")])]),a("div",{staticClass:"tickets_card__messages-item__content-text",domProps:{innerHTML:t._s(e.details)}})]),a("div",{staticClass:"tickets_card__messages-item__avatar"},["client"===e.owner?a("div",{staticClass:"tickets_card__messages-item__avatar-user"},[a("span",[t._v(t._s(""+(t.firstname.substr(0,1)+t.lastname.substr(0,1))))])]):a("div",{staticClass:"tickets_card__messages-item__avatar-service"})])])])})),0),t.messages.length?t._e():a("NoResult",{attrs:{type:"writers-messages"}}),a("div",{staticClass:"tickets_card__messages-actions"},[a("form-input",{attrs:{legend:"Message",type:"text",name:"message",field:t.message,errors:t.validationMessage(t.$v.message)},on:{"update:field":function(e){t.message=e}},nativeOn:{input:function(e){return t.$v.message.$touch()},keyup:function(e){return t.keyListner(e)},blur:function(e){return t.$v.message.$touch()}},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),a("button",{staticClass:"btn-base btn-base_normal btn-base_colored tickets_card__messages-actions-btn",on:{click:function(e){return e.preventDefault(),t.sendMessage(t.messages.ticketid)}}},[t.loadingBtn?a("button-loader"):t._e(),t._v(" send ")],1)],1)],1)])],1)])])])])])])},f=[],v=a("1dce"),g=a("376d"),h=a("b5ae"),b=a("c098"),C=a("2363"),k=a("3bf6"),w=a("bf6e"),y={name:"mdi-information-outline",props:{width:{type:[Number,String],default:null},height:{type:[Number,String],default:null},size:{type:[Number,String],default:24},viewBox:{type:[String],default:"0 0 24 24"},xmlns:{type:String,default:"http://www.w3.org/2000/svg"},ariaLabel:{type:String,default:"InformationOutline icon"},role:{type:String,default:"img"},title:{type:String,required:!1},spin:{type:Boolean,default:!1}}};const x=y;var D=function(t,e){var a=e._c;return a("span",{class:[e.data.staticClass,"mdi","mdi-information-outline",e.props.spin?"mdi-spin":void 0],attrs:{role:e.props.role,"aria-label":e.props.ariaLabel}},[a("svg",{attrs:{fill:"currentColor",width:e.props.width||e.props.size,height:e.props.height||e.props.size,viewBox:e.props.viewBox,xmlns:e.props.xmlns}},[e.title?a("title",[e._v(e._s(e.title))]):e._e(),e._v(" "),a("path",{attrs:{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z"}})])])},O=[];D._withStripped=!0;const $=function(t){t&&t("data-v-1fff99d6_0",{source:".mdi > svg {\n  vertical-align: middle;\n}\n.mdi.mdi-spin > svg {\n  -webkit-animation: mdi-spin 2s infinite linear;\n     -moz-animation: mdi-spin 2s infinite linear;\n          animation: mdi-spin 2s infinite linear;\n}\n@-webkit-keyframes mdi-spin {\n0% {\n      -webkit-transform: rotate(0deg);\n         -moz-transform: rotate(0deg);\n              transform: rotate(0deg);\n}\n100% {\n      -webkit-transform: rotate(360deg);\n         -moz-transform: rotate(360deg);\n              transform: rotate(360deg);\n}\n}\n@keyframes mdi-spin {\n0% {\n      -webkit-transform: rotate(0deg);\n         -moz-transform: rotate(0deg);\n              transform: rotate(0deg);\n}\n100% {\n      -webkit-transform: rotate(360deg);\n         -moz-transform: rotate(360deg);\n              transform: rotate(360deg);\n}\n}",map:void 0,media:void 0})},S=void 0,j=void 0,M=!0,L=Object(w["b"])({render:D,staticRenderFns:O},$,x,S,M,j,!1,w["a"],void 0,void 0);var R=L,A={components:{InformationOutline:R,NoResult:C["a"],ButtonLoader:k["a"]},mixins:[d["a"],v["validationMixin"]],validations:{message:{required:h["required"]}},data:function(){return{message:"",loadingBtn:!1,currentUnreadMsg:null,messages:[]}},computed:Object(n["a"])(Object(n["a"])({},Object(_["b"])(["client_data.firstname","client_data.lastname","client_data.email"])),{},{orderid:function(){return this.$route.params.id}}),mounted:function(){this.getData()},methods:{fileExists:function(t){if(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(),200===e.status}return!1},messageClass:function(t){return"client"===t?"user-message":"support-message writer-message"},getUnreadMessage:function(){if(this.unread.length>0){this.currentUnreadMsg=this.unread[0].id;var t=document.getElementById("item".concat(this.currentUnreadMsg)),e=document.getElementById("header").getBoundingClientRect().height,a=Object(l["a"])();a(t,{duration:600,offset:-e-10}),this.markAsRead()}},markAsRead:function(t){var e=this;return new Promise((function(a,s){var i=e;c["a"].post("/api/cp/order-message/mark-as-read",{orderid:e.orderid}).then((function(){i.decrementTicket(i.tickets.data[t].unread_messages.length),i.tickets.data[t].unread_messages=[],i.$root.$emit("updateCounter"),a(!0)})).catch((function(t){s(t)}))}))},keyListner:function(t){13===t.which&&this.message.length&&this.sendMessage()},sendMessage:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t,a.loadingBtn=!0,c["a"].post("/api/cp/order-message/create-message",{orderid:a.orderid,message:a.message}).then((function(){o["a"].$emit("showSnackBar","Your message has been received","success");var t={created_at_local:{date:new Date},owner:"client",type:"message",details:a.message};a.messages.push(t),a.message=""})).catch((function(t){o["a"].$emit("showSnackBar",t.response.data.message,"error")})).finally((function(){a.$v.$reset(),a.loadingBtn=!1}));case 3:case"end":return e.stop()}}),e)})))()},validationMessage:Object(g["validationMessage"])(b["a"]),getData:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.dataLoading=!0,a=t,e.next=4,c["a"].post("/api/cp/order-message/get-messages",{orderid:a.orderid}).then((function(t){a.messages=t.data,console.log(a.tickets)})).then((function(){a.dataLoading=!1}));case 4:case"end":return e.stop()}}),e)})))()}}},F=A,N=(a("785a"),a("2877")),T=Object(N["a"])(F,m,f,!1,null,null,null),B=T.exports,z=a("a1f0"),E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"attachments"},[a("header",{staticClass:"orders-details-tabs__tab-header"},[a("p",{staticClass:"orders-details-tabs__tab-description"},[a("InformationOutline"),t._v(" Here you will see the files uploaded by the writer as well as your additional files. ")],1)]),a("div",{staticClass:"file-uploader",attrs:{id:"view-add-form"}},[a("div",{staticClass:"file-uploader__box file-uploader__box_upload",class:{dragging:t.isDragging},on:{dragenter:t.onDragEnter,dragleave:t.onDragLeave,dragover:function(t){t.preventDefault()},drop:t.onDrop}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.file.length,expression:"!file.length"}],staticClass:"file-uploader__dragzone"},[a("p",{staticClass:"file-uploader__dragzone-text"},[t._v(" Drag files here ")]),a("div",{staticClass:"file-uploader__file-input"},[a("input",{attrs:{id:"file",type:"file",multiple:""},on:{change:t.onInputChange}})])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.files.length,expression:"files.length"}],staticClass:"file-uploader__file-loading"},t._l(t.file,(function(e,s){return a("div",{key:s,staticClass:"file-wrapper"},[a("div",{staticClass:"file-wrapper__progress"},[a("div",{staticClass:"loading-file__file-preview loading-file__file-preview_text"},[a("span",{staticClass:"file-type"},[t._v(t._s(t._f("fileType")(t.files[s].name)))])])]),a("div",{staticClass:"details"},[a("span",{staticClass:"name"},[t._v(t._s(t.files[s].name))])])])})),0)]),t.uploadedFiles.length>0?a("div",{staticClass:"file-uploader__box file-uploader__box_uploaded"},[a("div",{staticClass:"attachments-table"},[a("div",{staticClass:"attachments-table__head"},[a("div",{staticClass:"attachments-table__row"},[a("div",{staticClass:"attachments-table__cell",class:{"attachments-table__cell_sort-up":"filename"===t.sorting.sort_by&&"desc"===t.sorting.sort_order,"attachments-table__cell_sort-down":"filename"===t.sorting.sort_by&&"asc"===t.sorting.sort_order},on:{click:function(e){return e.preventDefault(),t.sortList("filename")}}},[a("span",[t._v("Name")])]),a("div",{staticClass:"attachments-table__cell",class:{"attachments-table__cell_sort-up":"created_at"===t.sorting.sort_by&&"desc"===t.sorting.sort_order,"attachments-table__cell_sort-down":"created_at"===t.sorting.sort_by&&"asc"===t.sorting.sort_order},on:{click:function(e){return e.preventDefault(),t.sortList("created_at")}}},[a("span",[t._v("Date ")])]),a("div",{staticClass:"attachments-table__cell",class:{"attachments-table__cell_sort-up":"owner"===t.sorting.sort_by&&"desc"===t.sorting.sort_order,"attachments-table__cell_sort-down":"owner"===t.sorting.sort_by&&"asc"===t.sorting.sort_order},on:{click:function(e){return e.preventDefault(),t.sortList("owner")}}},[a("span",[t._v("Owner")])]),a("div",{staticClass:"attachments-table__cell",class:{"attachments-table__cell_sort-up":"filesize"===t.sorting.sort_by&&"desc"===t.sorting.sort_order,"attachments-table__cell_sort-down":"filesize"===t.sorting.sort_by&&"asc"===t.sorting.sort_order},on:{click:function(e){return e.preventDefault(),t.sortList("filesize")}}},[a("span",[t._v("Size")])]),t._m(0)])]),a("div",{staticClass:"attachments-table__body"},t._l(t.uploadedFiles,(function(e,s){return a("div",{key:s,staticClass:"attachments-table__row"},[a("div",{staticClass:"attachments-table__cell"},[a("div",{staticClass:"loaded-file__preview"},[a("span",{staticClass:"loaded-file__preview-format"},[t._v(" "+t._s(t.getFileExtension(e.filename))+" ")])]),a("span",{staticClass:"loaded-file__name"},[t._v(" "+t._s(e.filename)+" ")])]),a("div",{staticClass:"attachments-table__cell"},[a("span",{staticClass:"loaded-file__date"},[e.created_at_local?a("span",[t._v(" "+t._s(t._f("moment_from")(e.created_at_local.date))+" ago"),a("br"),a("small",[t._v(t._s(t._f("moment_short_text")(e.created_at_local.date)))])]):t._e()])]),a("div",{staticClass:"attachments-table__cell"},[!0===t.isOwnedByWriterOrAdmin(e.owner)?a("div",{staticClass:"loaded-file__author-avatar loaded-file__author-avatar_default"},[e.written_by&&e.written_by.avatar?a("img",{attrs:{src:"/images/avatars/"+e.written_by.avatar}}):a("img",{staticClass:"loading-file__title-writer__img-def",attrs:{src:"/images/svg/pencil-up.svg",alt:""}})]):a("div",{staticClass:"loaded-file__author-avatar"}),null!==e.written_by?a("div",{staticClass:"loaded-file__author-details"},[a("span",{staticClass:"loaded-file__author-details--name"},[t._v(" "+t._s(e.written_by.firstname+" "+e.written_by.lastname.charAt(0))+" ")]),a("span",{staticClass:"loaded-file__author-details--id"},[t._v(" "+t._s("ID "+e.written_by.sw_id)+" ")])]):a("div",{staticClass:"loaded-file__author-details"},[a("span",{staticClass:"loaded-file__author-details--name"},[t._v(" "+t._s(t.firstname+" "+t.lastname.charAt(0))+" ")])])]),a("div",{staticClass:"attachments-table__cell"},[a("span",{staticClass:"loaded-file__size"},[t._v(" "+t._s(t._f("file_size")(Number(e.filesize)))+" ")])]),a("div",{staticClass:"attachments-table__cell attachments-table__cell_actions"},["file_main"===e.table?a("a",{staticClass:"attachments-table__action attachments-table__action_download",attrs:{href:"/download?id="+e.file_id+"&type=main",download:""}}):"file_add"===e.table?a("a",{staticClass:"attachments-table__action attachments-table__action_download",attrs:{href:"/download?id="+e.file_id+"&type=add",download:""}}):t._e(),"client"===e.owner?a("a",{staticClass:"attachments-table__action attachments-table__action_delete",attrs:{title:"Delete File"},on:{click:function(a){return a.preventDefault(),t.confirmDelFile(e)}}}):t._e()])])})),0)])]):t._e()])])},I=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"attachments-table__cell attachments-table__cell_actions"},[a("span",[t._v("Actions")])])}],H=(a("a630"),a("a434"),a("b0c0"),a("ac1f"),a("3ca3"),a("1276"),{components:{InformationOutline:R},mixins:[d["a"]],data:function(){return{isDragging:!1,dragCount:0,files:[],file:[],uploadedFiles:[],inProgress:!1,uploadProgressValue:0,dialog:!1,fullSizeImg:null,delFile:null,dialogConfirmDel:!1,sorting:{sort_by:"created_at",sort_order:"desc"}}},computed:Object(n["a"])(Object(n["a"])({},Object(_["b"])(["client_data.firstname","client_data.lastname","client_data.email","clientid"])),{},{clientInitials:function(){return this.firstname.charAt(0)+this.lastname.charAt(0)},id:function(){return this.$route.params.id},windowWidth:function(){return window.innerWidth}}),beforeDestroy:function(){},mounted:function(){return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},methods:{sortList:function(t){function e(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return function(a,s){var i="string"===typeof a[t]?a[t].toUpperCase():a[t],r="string"===typeof s[t]?s[t].toUpperCase():s[t],n=0;return i>r?n=1:i<r&&(n=-1),"desc"===e?-1*n:n}}var a="asc"===this.sorting.sort_order?"desc":"asc";this.sorting.sort_by=t,this.sorting.sort_order=a,this.uploadedFiles=this.uploadedFiles.sort(e(t,a))},getFileExtension:function(t){var e=t.split(".");return!!e[1]&&e[1]},isOwnedByWriterOrAdmin:function(t){return/^\d+$/.test(t)},onDragEnter:function(t){t.preventDefault(),this.dragCount+=1,this.isDragging=!0},onDragLeave:function(t){t.preventDefault(),this.dragCount-=1,this.dragCount<=0&&(this.isDragging=!1)},onDrop:function(t){var e=this;t.preventDefault(),t.stopPropagation(),this.isDragging=!1;var a=t.dataTransfer.files;Array.from(a).forEach((function(t){return e.addUploadFiles(t)})),this.upload()},addUploadFiles:function(t){var e=this;this.files.push(t);var a=new FileReader;a.onload=function(t){return e.file.push(t.target.result)},a.readAsDataURL(t)},onInputChange:function(t){var e=this,a=t.target.files;Array.from(a).forEach((function(t){return e.addUploadFiles(t)})),this.upload()},getFileOwnerClass:function(t,e){return"file_add"===t&&"client"===e?"loading-file__client":"file_main"===t?"loading-file__support":"file_fax"===t?"loading-file__client":"loading-file__support"},upload:function(){var t=this;t.inProgress=!0;var e=new FormData;t.files.forEach((function(t){e.append("uploaded[".concat(t.name,"]"),t)})),e.append("orderid",this.id),t.$http.post("/api/cp/file/upload",e,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){t.uploadProgressValue=Math.floor(100*e.loaded/e.total)}}).then((function(){t.success(),t.file=[],t.files=[]})).catch((function(){t.file=[]})).then((function(){t.inProgress=!1}))},success:function(){this.getFiles()},confirmDelFile:function(t){this.delFile=t,this.dialogConfirmDel=!0},deleteFile:function(){var t=this,e=this;this.$http.delete("/api/cp/file/delete/".concat(e.delFile.id)).then((function(){for(var a=0;a<t.uploadedFiles.length;a+=1)if(t.uploadedFiles[a].id===e.delFile.id)return t.delFile=null,t.dialogConfirmDel=!1,void t.uploadedFiles.splice(a,1)})).catch((function(){}))},showFullImg:function(t){this.fullSizeImg=t,console.log(t),this.dialog=!0}}}),P=H,U=Object(N["a"])(P,E,I,!1,null,null,null),V=U.exports,q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("header",{staticClass:"orders-details-tabs__tab-header"},[a("p",{staticClass:"orders-details-tabs__tab-description"},[a("InformationOutline"),t._v(" Your original project specifications are here. ")],1)]),a("div",{staticClass:"order-detail__body"},[a("div",{staticClass:"order-detail__details order-detail__col50"},[a("h3",[t._v("Main information")]),a("div",{staticClass:"detail-rows"},[a("div",{staticClass:"detail-row"},[a("div",{staticClass:"detail-name"},[t._v(" Ordered: ")]),t.order.ts_ordered?a("div",{staticClass:"detail-value"},[t._v(" "+t._s(t._f("moment_full_text")(t.order.ts_ordered))+" ")]):t._e()]),a("div",{staticClass:"detail-row"},[a("div",{staticClass:"detail-name"},[t._v(" Due: ")]),t.order.due_at_local?a("div",{staticClass:"detail-value"},[a("strong",[t._v(" "+t._s(t._f("moment_full_text")(t.order.due_at_local.date))+" ")])]):t._e()]),a("div",{staticClass:"detail-row"},[a("div",{staticClass:"detail-name"},[t._v(" Project: ")]),a("div",{staticClass:"detail-value"},[t._v(" "+t._s(t.getLabel(t.projects,t.order.type))+" ")])]),t.order.academiclevel?a("div",{staticClass:"detail-row"},[a("div",{staticClass:"detail-name"},[t._v(" Level: ")]),a("div",{staticClass:"detail-value"},[t._v(" "+t._s(t.getLabel(t.levels,t.order.academiclevel))+" ")])]):t._e(),t.order.style?a("div",{staticClass:"detail-row"},[a("div",{staticClass:"detail-name"},[t._v(" Citation Style: ")]),a("div",{staticClass:"detail-value"},[t._v(" "+t._s(t.getLabel(t.styles,t.order.style))+" ")])]):t._e(),t.order.sources?a("div",{staticClass:"detail-row"},[a("div",{staticClass:"detail-name"},[t._v(" Sources: ")]),a("div",{staticClass:"detail-value"},[t._v(" "+t._s(t.order.sources)+" ")])]):t._e(),t.order.title?a("div",{staticClass:"detail-row"},[a("div",{staticClass:"detail-name"},[t._v(" Title: ")]),a("div",{staticClass:"detail-value"},[t._v(" «"+t._s(t.order.title)+"» ")])]):t._e(),t.order.details?a("div",{staticClass:"detail-row"},[a("div",{staticClass:"detail-name"},[t._v(" Details: ")]),!0===t.detailsShortActive?a("div",{staticClass:"detail-value"},[t._v(" "+t._s(t.detailsShort)+" "),a("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.detailsShortActive=!t.detailsShortActive}}},[t._v("More")])]):a("div",{staticClass:"detail-value"},[a("span",{domProps:{innerHTML:t._s(this.$options.filters.paragraphAddBreaks(t.order.details))}}),a("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.detailsShortActive=!0}}},[t._v("Less")])])]):t._e()])]),a("div",{staticClass:"order-detail__prices order-detail__col50"},[a("div",{staticClass:"order-detail__prices-block"},[a("h3",[t._v("Ordered services")]),a("div",{staticClass:"price-rows"},[t.order.pages?a("div",{staticClass:"price-row"},[a("div",{staticClass:"price-name"},[a("span",{staticClass:"icon-wrapper"},[a("FileDocumentOutline")],1),t._v(" "+t._s(t.order.pages)+" pages ")]),a("div",{staticClass:"price-value"})]):t._e(),t.order.slides?a("div",{staticClass:"price-row"},[a("div",{staticClass:"price-name"},[t._m(0),t._v(t._s(t.order.slides)+" slides ")]),a("div",{staticClass:"price-value"})]):t._e(),t.order.charts?a("div",{staticClass:"price-row"},[a("div",{staticClass:"price-name"},[t._m(1),t._v(t._s(t.order.charts)+" charts ")]),a("div",{staticClass:"price-value"})]):t._e(),t.order.problems?a("div",{staticClass:"price-row"},[a("div",{staticClass:"price-name"},[t._m(2),t._v(" "+t._s(t.order.problems)+" problems ")]),a("div",{staticClass:"price-value"})]):t._e()])]),t.order.batch?a("div",{staticClass:"order-detail__prices-block"},[a("h3",[t._v("Transaction Details")]),a("div",{staticClass:"price-rows"},[t.order.batch.status?a("div",{staticClass:"price-row"},[a("div",{staticClass:"price-name"},[t._v(" Status ")]),a("div",{staticClass:"price-value"},[t._v(" "+t._s(t.order.batch.status)+" ")])]):t._e(),"UNPAID"!==t.order.batch.status?a("div",[t.order.batch.batchid?a("div",{staticClass:"price-row"},[a("div",{staticClass:"price-name"},[t._v(" Batch ID ")]),a("div",{staticClass:"price-value"},[t._v(" "+t._s(t.order.batch.batchid)+" ")])]):t._e(),t.order.batch.total?a("div",{staticClass:"price-row"},[a("div",{staticClass:"price-name"},[t._v(" Total ")]),a("div",{staticClass:"price-value"},[t._v(" "+t._s(t._f("money")(t.order.batch.total))+" ")])]):t._e(),t.order.batch.paymethod?a("div",{staticClass:"price-row"},[a("div",{staticClass:"price-name"},[t._v(" Payment Method ")]),a("div",{staticClass:"price-value"},[t._v(" "+t._s(t.order.batch.paymethod)+" ")])]):t._e()]):t._e()])]):t._e()])]),a("footer",{staticClass:"order-detail__footer"},[a("div",{staticClass:"grand-total"},[t._v(" Grand Total: "),a("span",{staticClass:"grand-total--price"},[t._v(t._s(t._f("money")(t.order.total)))]),a("span",[t._v(t._s(t.order.batchid))])])])])},Y=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon-wrapper"},[a("i",{staticClass:"far fa-image"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon-wrapper"},[a("i",{staticClass:"far fa-chart-bar"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon-wrapper"},[a("i",{staticClass:"fas fa-exclamation-triangle"})])}],W={name:"mdi-file-document-outline",props:{width:{type:[Number,String],default:null},height:{type:[Number,String],default:null},size:{type:[Number,String],default:24},viewBox:{type:[String],default:"0 0 24 24"},xmlns:{type:String,default:"http://www.w3.org/2000/svg"},ariaLabel:{type:String,default:"FileDocumentOutline icon"},role:{type:String,default:"img"},title:{type:String,required:!1},spin:{type:Boolean,default:!1}}};const G=W;var J=function(t,e){var a=e._c;return a("span",{class:[e.data.staticClass,"mdi","mdi-file-document-outline",e.props.spin?"mdi-spin":void 0],attrs:{role:e.props.role,"aria-label":e.props.ariaLabel}},[a("svg",{attrs:{fill:"currentColor",width:e.props.width||e.props.size,height:e.props.height||e.props.size,viewBox:e.props.viewBox,xmlns:e.props.xmlns}},[e.title?a("title",[e._v(e._s(e.title))]):e._e(),e._v(" "),a("path",{attrs:{d:"M6,2A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6M6,4H13V9H18V20H6V4M8,12V14H16V12H8M8,16V18H13V16H8Z"}})])])},Q=[];J._withStripped=!0;const Z=function(t){t&&t("data-v-7ae15f3a_0",{source:".mdi > svg {\n  vertical-align: middle;\n}\n.mdi.mdi-spin > svg {\n  -webkit-animation: mdi-spin 2s infinite linear;\n     -moz-animation: mdi-spin 2s infinite linear;\n          animation: mdi-spin 2s infinite linear;\n}\n@-webkit-keyframes mdi-spin {\n0% {\n      -webkit-transform: rotate(0deg);\n         -moz-transform: rotate(0deg);\n              transform: rotate(0deg);\n}\n100% {\n      -webkit-transform: rotate(360deg);\n         -moz-transform: rotate(360deg);\n              transform: rotate(360deg);\n}\n}\n@keyframes mdi-spin {\n0% {\n      -webkit-transform: rotate(0deg);\n         -moz-transform: rotate(0deg);\n              transform: rotate(0deg);\n}\n100% {\n      -webkit-transform: rotate(360deg);\n         -moz-transform: rotate(360deg);\n              transform: rotate(360deg);\n}\n}",map:void 0,media:void 0})},X=void 0,K=void 0,tt=!0,et=Object(w["b"])({render:J,staticRenderFns:Q},Z,G,X,tt,K,!1,w["a"],void 0,void 0);var at=et,st={components:{InformationOutline:R,FileDocumentOutline:at},mixins:[d["a"]],props:{order:{type:Object}},data:function(){return{projects:null,turnarounds:null,levels:null,subjects:null,styles:null,extrasRates:null,detailsShortActive:!0}},computed:{detailsShort:function(){return Object(u["truncate"])(this.order.details,{length:"50"})}},mounted:function(){this.getData()},methods:{getLabel:function(t,e){var a=Object(u["find"])(t,{value:e});return a?a.text:""},getData:function(){var t=this;new Promise((function(e,a){var s=t;c["a"].get("/api/data/order").then((function(t){s.projects=t.data.type,s.turnarounds=t.data.turnaround,s.levels=t.data.level,s.subjects=t.data.subject,s.styles=t.data.style,s.extrasRates=t.data.extras,e("success")})).catch((function(t){a(t)}))}))}}},it=st,rt=Object(N["a"])(it,q,Y,!1,null,null,null),nt=rt.exports,ot=a("e98b"),ct=a("533f"),lt=a("83af"),dt={components:{MainLayout:p["a"],LoadingOverlay:ct["a"],Messages:B,Tickets:z["a"],OrderDetails:nt,Attachments:V,SupportForm:ot["a"],OrdersCard:lt["a"]},mixins:[d["a"]],data:function(){return{actions:!1,dataLoading:!1,order:{},tabs:{"#details":!0,"#files":!1,"#messages":!1,"#tickets":!1},toggling:!1,noResults:!1,ticketsNotification:null}},computed:Object(n["a"])(Object(n["a"])({},Object(_["b"])(["client_data.id"])),{},{orderid:function(){return this.$route.params.id},settingsBreadcrumbs:function(){return{title:"Order Details",steps:[{title:"Home",url:"/"},{title:"Account",url:"/cp/account"},{title:"My Orders",url:"/cp/orders"},{title:this.orderid,url:""}],additionalClass:"bc-horizontal"}}}),watch:{$route:function(t,e){t.hash!==e.hash&&this.show(t.hash)}},mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$root.$on("updateCounter",(function(){t.getCounterSupportTickets()})),"#files"!==t.$route.hash&&"#messages"!==t.$route.hash||t.show(t.$route.hash),t.getOrderData();case 3:case"end":return e.stop()}}),e)})))()},deactivated:function(){this.$destroy()},methods:{show:function(t){var e=this;Object(u["forEach"])(e.tabs,(function(t,a){e.tabs[a]=!1})),this.tabs[t]=!0},getOrderData:function(){var t=this,e=this;e.dataLoading=!0,c["a"].post("/api/cp/order/fetch",{id:e.$route.params.id}).then((function(t){e.order=t.data,e.dataLoading=!1,e.order.showTools=!0})).catch((function(e){404===e.response.status&&(t.noResults=!0)})).finally((function(){e.dataLoading=!1})),this.getCounterSupportTickets()},getCounterSupportTickets:function(){var t=this;c["a"].post("/api/cp/ticket-support/list-tickets",{orderid:t.orderid,per_page:999,clientid:t.id}).then((function(e){t.updateCounterSupportTickets(e.data.data)}))},updateCounterSupportTickets:function(t){var e=0;t.forEach((function(t){t.unread_messages.length>0&&(e+=1)})),this.ticketsNotification=e},updateOrderData:function(){var t=this;c["a"].post("/api/cp/order/fetch",{id:t.$route.params.id}).then((function(e){t.order=e.data}))},onActionCompleted:function(t){o["a"].$emit("showSnackBar",t,"success"),this.updateOrderData()},onDeleted:function(){this.$router.push({name:"orders"})},onChangeTab:function(t){this.show(t)},scrollToSupportForm:function(){var t=document.querySelector("#create-ticket");if(t){var e=Object(l["a"])();e(t,{duration:600,offset:-85})}}}},_t=dt,ut=(a("8b28"),Object(N["a"])(_t,s,i,!1,null,"05884c84",null));e["default"]=ut.exports},2363:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"no-result"},[a("h1",{staticClass:"no-result__title no-result__title_question"},[t._v(" "+t._s(t.title?t.title:t.decorData[t.type].title)+" ")]),a("p",{staticClass:"no-result__description"},[t._v(" "+t._s(t.description?t.description:t.decorData[t.type].description)+" ")]),"orders"===t.type?a("p",{staticClass:"no-result__action"},[a("router-link",{staticClass:"profile-metainfo__btn btn-base btn-base_normal btn-base_orange",attrs:{to:{name:"order_new",params:{}}}},[t._v(" Create order ")])],1):t._e()])},i=[],r={props:{type:{type:String},title:{type:String},description:{type:String}},data:function(){return{decorData:{tickets:{title:"No issues",description:"Create a new support ticket, if you need help."},orders:{title:"No orders found",description:"You will see data here after you place your first order"},billing:{title:"No transactions",description:"You will see data here after you place your first order"},"order-details":{title:"No order data",description:"No data available for this order."},friend:{title:"No purchases",description:"Your friend has not made any purchases yet"},friends:{title:"No friends",description:"You will see data here after you register your first friend."},writers:{title:"No writers",description:"No writers yet"},"writers-messages":{title:"No messages",description:"No messages yet"},credits:{title:"No credits",description:"You can earn credits when your registered friends make an order. Your credits can be cashed out!"}}}}},n=r,o=(a("d48e"),a("2877")),c=Object(o["a"])(n,s,i,!1,null,"50f4f8d1",null);e["a"]=c.exports},"262d":function(t,e,a){t.exports=a.p+"img/Questions.3022ba39.svg"},"2e02":function(t,e,a){},"785a":function(t,e,a){"use strict";a("db60")},"8b28":function(t,e,a){"use strict";a("2e02")},"998d":function(t,e,a){t.exports=a.p+"img/list.0864673a.svg"},"9d9f":function(t,e,a){t.exports=a.p+"img/information.ff86f3c3.svg"},a1f0:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tickets"},[t.dataLoading?s("loading-overlay"):t._e(),t.tickets.total||t.dataLoading?t._e():s("div",{staticClass:"no-results"},[s("img",{attrs:{src:a("262d"),alt:"Questions"}}),s("h1",{staticClass:"no-results__title no-results__title_question"},[t._v(" No issues ")]),s("p",{staticClass:"no-results__description"},[t._v(" Create a new support ticket, if you need help. ")])]),t._l(t.tickets.data,(function(e,i){return s("div",{key:i,staticClass:"tickets_card"},[s("div",{staticClass:"tickets_card__info"},[e.orderid?s("router-link",{staticClass:"tickets_card__title",attrs:{to:{name:"details",params:{id:e.orderid},query:{tab:"tickets",referenceid:e.ticketid}}}},[s("h2",[s("span",{staticClass:"tickets_card__title-index"},[t._v(" "+t._s(t.offset+i+1+". ")+" ")]),t._v(" «"),s("span",{staticClass:"tickets-title-text"},[t._v(t._s(e.subject||"Untitled"))]),t._v("» "),s("span",{staticClass:"break-xs"},[s("span",{staticClass:"tickets_card__title--status",class:{"tickets_card__title--status__success":"OPEN"===e.status_support,"tickets_card__title--status__error":"OPEN"!==e.status_support}},[t._v(" "+t._s(e.status_support)+" ")])])])]):s("h2",{staticClass:"tickets_card__title"},[s("span",{staticClass:"tickets_card__title-index"},[t._v(" "+t._s(t.offset+i+1)+". ")]),t._v(" «"+t._s(e.subject||"Untitled")+"» "),s("span",{staticClass:"tickets_card__title--status",class:{"tickets_card__title--status__success":"OPEN"===e.status_support,"tickets_card__title--status__error":"OPEN"!==e.status_support}},[t._v(" "+t._s(e.status_support)+" ")])]),s("div",{staticClass:"tickets_card__metainfo",class:{"show-info":e.showMessages}},[s("span",{staticClass:"tickets_card__metainfo-data"},[s("span",{staticClass:"tickets_card__metainfo-data-title"},[t._v(" "+t._s(t._f("moment_bidding_text")(e.created_at.date))+" ")]),s("span",{staticClass:"tickets_card__metainfo-data-counter"},[s("img",{staticClass:"mdi",attrs:{src:a("40ce"),alt:"Deadline",width:"20px",height:"20px"}}),t._v(" "+t._s(t._f("moment_from")(e.created_at.date))+" ago ")])]),e.ticketid?s("span",{staticClass:"tickets_card__metainfo-data"},[s("span",{staticClass:"tickets_card__metainfo-data-title"},[t._v(" Ticket ID ")]),s("span",{staticClass:"tickets_card__metainfo-data-counter"},[s("img",{staticClass:"mdi",attrs:{src:a("fe3c"),alt:"Deadline",width:"20px",height:"20px"}}),t._v(" "+t._s(e.ticketid)+" ")])]):t._e(),e.orderid?s("span",{staticClass:"tickets_card__metainfo-data"},[s("span",{staticClass:"tickets_card__metainfo-data-title"},[t._v(" Order ID ")]),s("span",{staticClass:"tickets_card__metainfo-data-counter"},[s("img",{staticClass:"mdi",attrs:{src:a("fe3c"),alt:"Deadline",width:"20px",height:"20px"}}),t._v(" "+t._s(e.orderid)+" ")])]):t._e(),e.messages.length>0?s("span",{staticClass:"tickets_card__metainfo-data tickets_card__metainfo-data--md0"},[s("span",{staticClass:"tickets_card__metainfo-data-title"},[t._v(" Comments ")]),s("span",{staticClass:"tickets_card__metainfo-data-counter"},[s("img",{staticClass:"mdi",attrs:{src:a("d3c9"),alt:"Deadline",width:"20px",height:"20px"}}),t._v(" "+t._s(e.messages.length)+" "),e.unread_messages.length>0?s("span",{staticClass:"orange-text"},[t._v(" +"+t._s(e.unread_messages.length)+" "),s("sup",[t._v("new")])]):t._e()]),s("span",{staticClass:"show-info__detail"})]):t._e(),s("a",{staticClass:"tickets_card__toggle-btn",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.toggle(i,e.ticketid)}}},[e.showMessages?s("chevron-up"):s("chevron-down")],1)]),s("transition",{attrs:{name:"slide-y-transition"}},[e.showMessages?s("div",{staticClass:"tickets_card__messages"},[t._l(e.messages,(function(e,a){return s("div",{key:a,staticClass:"tickets_card__messages-item",class:{"tickets_card__messages-item__support":"client"!==e.owner}},[s("div",{staticClass:"tickets_card__messages-item__inside"},[s("div",{staticClass:"tickets_card__messages-item__content"},[s("div",{staticClass:"tickets_card__messages-item__content-header"},[e.created_at_local?s("span",{staticClass:"tickets_card__messages-item__content-header__time"},[t._v(" "+t._s(t._f("moment_from")(e.created_at_local.date))+" ago "),s("br"),s("small",[t._v(" "+t._s(t._f("moment_short_text")(e.created_at_local.date))+" ")])]):t._e(),"client"===e.owner?s("span",{staticClass:"tickets_card__messages-item__content-header__name"},[t._v(" "+t._s(""+t.firstname)+" ")]):s("span",{staticClass:"tickets_card__messages-item__content-header__name"},[t._v(" Support ")])]),s("div",{staticClass:"tickets_card__messages-item__content-text",domProps:{innerHTML:t._s(e.details)}})]),s("div",{staticClass:"tickets_card__messages-item__avatar"},["client"===e.owner?s("div",{staticClass:"tickets_card__messages-item__avatar-user"},[s("span",[t._v(t._s(""+(t.firstname.substr(0,1)+t.lastname.substr(0,1))))])]):s("div",{staticClass:"tickets_card__messages-item__avatar-service"})])])])})),s("div",{staticClass:"tickets_card__messages-actions"},[s("form-input",{attrs:{legend:"Message",type:"text",name:"message",field:t.message,errors:t.validationMessage(t.$v.message)},on:{"update:field":function(e){t.message=e}},nativeOn:{input:function(e){return t.$v.message.$touch()},blur:function(e){return t.$v.message.$touch()},keyup:function(e){return t.keyListner(e)}},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),s("button",{staticClass:"btn-base btn-base_normal btn-base_colored tickets_card__messages-actions-btn",on:{click:function(a){return a.preventDefault(),t.sendMessage(e.ticketid)}}},[t.loadingBtn?s("button-loader"):t._e(),t._v(" Reply ")],1)],1)],2):t._e()]),s("a",{staticClass:"tickets_card__toggle-btn_mobile",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.toggle(i,e.ticketid)}}},[e.showMessages?s("span",{staticClass:"btn-base btn-base_normal btn-base_border btn-base_border-ticket"},[t._v("hide")]):s("span",{staticClass:"btn-base btn-base_normal btn-base_border btn-base_border-ticket"},[t._v("Show more")])])],1)])}))],2)},i=[],r=(a("d3b7"),a("96cf"),a("1da1")),n=a("5530"),o=a("8cd1"),c=a("2ef0"),l=a("41bd"),d=a("5ff3"),_=a("1dce"),u=a("376d"),p=a("b5ae"),m=a("c098"),f=a("3e07"),v=a("3fcd"),g=a("533f"),h=a("3bf6"),b=a("eca1"),C=a("8a67"),k=a("2f62"),w=a("0d8a"),y=a("c581"),x=Object(k["a"])("support"),D=x.mapMutations,O=x.mapActions,$={components:{ChevronUp:f["a"],ChevronDown:v["a"],LoadingOverlay:g["a"],ButtonLoader:h["a"]},mixins:[d["a"],_["validationMixin"]],props:{orderid:{type:String}},validations:{message:{required:p["required"]}},data:function(){return{page:this.$router.currentRoute.params.page||1,dataLoading:!1,tickets:[],loadingBtn:!1}},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(y["b"])(["client_data.id"])),Object(w["a"])(["form_data.message"])),{},{offset:function(){return this.tickets.per_page*(this.page-1)},firstname:function(){return this.$store.state.client.client_data.firstname},lastname:function(){return this.$store.state.client.client_data.lastname}}),mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getData();case 2:t.$route.query.referenceid&&(a=t.$route.query.referenceid,s=Object(c["findIndex"])(t.tickets.data,(function(t){return t.ticketid===a})),t.toggle(s,a)),l["a"].$on("showSnackBar",(function(e){"A support ticket has been created. You can view all tickets in your account (Support Tickets)."===e&&t.getData()}));case 4:case"end":return e.stop()}}),e)})))()},methods:Object(n["a"])(Object(n["a"])(Object(n["a"])({},O({actionTicketAskReply:b["a"],actionTicketSubmitReply:b["c"]})),D({clearMessage:C["b"]})),{},{toggle:function(t,e){this.$v.$reset();var a=this,s=this.tickets.data[t].showMessages;this.clearMessage(),Object(c["forEach"])(a.tickets.data,(function(t){t.showMessages=!1})),this.tickets.data[t].showMessages=!s,a.$forceUpdate(),setTimeout((function(){a.markAsRead(t,e)}),1e3)},markAsRead:function(t,e){var a=this;return new Promise((function(s,i){var r=a;o["a"].post("/api/cp/ticket-support/mark-ticket-messages-as-read",{ticketid:e}).then((function(){r.tickets.data[t].unread_messages=[],r.$root.$emit("updateCounter"),s(!0)})).catch((function(t){i(t)}))}))},keyListner:function(t){13===t.which&&this.message.length&&this.sendMessage()},sendMessage:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.$v.$touch(),0!==e.message.length){a.next=3;break}return a.abrupt("return");case 3:return s=e,s.actionTicketAskReply({id:t}),s.loadingBtn=!0,a.next=8,s.actionTicketSubmitReply({id:t});case 8:i=a.sent,i&&s.updateMessage(t).then((function(){l["a"].$emit("showSnackBar","Your message has been received","success"),s.message=""})).catch((function(t){l["a"].$emit("showSnackBar",t.message,"error")})).then((function(){s.$v.$reset(),s.loadingBtn=!1}));case 10:case"end":return a.stop()}}),a)})))()},validationMessage:Object(u["validationMessage"])(m["a"]),getData:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t.orderid),t.dataLoading=!0,a=t,e.next=5,o["a"].post("/api/cp/ticket-support/list-tickets",{orderid:a.orderid,per_page:10,clientid:a.id}).then((function(t){a.tickets=t.data})).then((function(){a.dataLoading=!1}));case 5:case"end":return e.stop()}}),e)})))()},updateMessage:function(t){var e=this;return new Promise((function(a,s){var i=e;o["a"].post("/api/cp/ticket-support/fetch",{ticketid:t}).then((function(e){var s=Object(c["findIndex"])(i.tickets.data,(function(e){return e.ticketid===t}));i.tickets.data[s].messages=e.data[0].messages,a(!0)})).catch((function(t){s(t)}))}))}})},S=$,j=a("2877"),M=Object(j["a"])(S,s,i,!1,null,null,null);e["a"]=M.exports},d48e:function(t,e,a){"use strict";a("0cb6")},db60:function(t,e,a){}}]);
//# sourceMappingURL=_myorderdetails.9133cb01.js.map